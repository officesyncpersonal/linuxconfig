
#----------Mongo---#
sudo systemctl start mongod

#If you receive an error similar to the following when starting mongod:
#Failed to start mongod.service: Unit mongod.service not found.
sudo systemctl daemon-reload

sudo systemctl status mongod
sudo systemctl enable mongod
sudo systemctl stop mongod
sudo systemctl restart mongod
sudo service mongod stop

#Restart
sudo reboot now

#Upgrages apt
sudo apt update

#Installs JDK
sudo apt install default-jdk

#System wide environment variable
sudo nano /etc/environment

#Get all service status 
service  --status-all

#Jdk path
/usr/lib/jvm/java-1.11.0-openjdk-amd64

#In file explorer to look at respective file systems
\\wsl$

#get running file systems
wsl -l -v

#WSL get host detail
ip addr | grep eth0

#Get windows machine address
cat /etc/resolv.conf

#Copy the IP address following the term: nameserver.
#Connect to any Windows server using the copied IP address.

#Get hosts file 
vi /etc/hosts

#Install net tools
sudo apt install net-tools

#sample commanfs to start kafka
alias z='/home/dhiraj/temp/kafka/bin/zookeeper-server-start.sh /home/dhiraj/temp/scripts/kafka/config/zookeeper.properties'
alias ks='/home/dhiraj/temp/kafka/bin/kafka-server-start.sh /home/dhiraj/temp/scripts/kafka/config/server.properties'
alias kc='/home/dhiraj/temp/kafka/bin/connect-standalone.sh /home/dhiraj/temp/scripts/kafka/config/connect-standalone.properties /home/dhiraj/temp/scripts/kafka/config/MongoSinkConnector.properties'

source /etc/profile.d/gradle.sh
gradle -v

WSL: 172.20.118.253
Win10: 172.20.112.1

#If you want the script to remain after closing the terminal, another option is to use setsid:
setsid script.sh

#just add a & to the end of the command
script.sh &
command &

#If you are running it in a terminal, and you want to then close the terminal, use nohup or disown
nohup

nohup script.sh &
disown

script &
disown



#You should really decide what you want to do with any output from the script. It makes sense to either throw it away, or catch it in a logfile.
# Throw it away.
/home/my_user/scripts/my_script.sh >> /dev/null 2>&1 &

# Redirect to log file.
/home/my_user/scripts/my_script.sh >> /home/my_user/scripts/logs/my_script.log 2>&1 &

#If you capture it in a log file, you can keep an eye on it by tailing the log file.
tail -f /home/my_user/scripts/logs/my_script.log

#The script can still be affected by hang-up signals. You can stop this by using the nohup command. 
#This will accept all standard output and standard error by default, but you can still use a custom log file.

# All output directed to nohup.out.
nohup /home/my_user/scripts/my_script.sh &

# All output captured by logfile.
nohup /home/my_user/scripts/my_script.sh >> /home/my_user/scripts/logs/my_script.log 2>&1 &

#Checking Background Jobs
#The jobs command lists the current background jobs and their state.

$ jobs
[1]+  Running                 /home/my_user/scripts/my_script.sh >> /home/my_user/scripts/logs/my_script.log 2>&1 &
$

You can bring a job to the foreground by issuing the fg command for the job of interest.

$ fg 1

#nohup $khome/bin/zookeeper-server-start.sh $kconfig/props/zookeeper.properties >> $home/logs/kafka_zookeeper.log 2>&1 &
#nohup $khome/bin/kafka-server-start.sh $kconfig/props/server.properties >> $home/logs/kafka_zookeeper.log 2>&1 &

#The directory /var/lib/samba/usershares is set up so only root or members of the sambashare group can read or write to it.
sudo usermod -a -G sambashare $USER
#You can test this with id $USER and assuming usershares is not in the output, you can fix all this just by running:

#Git
hint: Pulling without specifying how to reconcile divergent branches is
hint: discouraged. You can squelch this message by running one of the following
hint: commands sometime before your next pull:
hint:
hint:   git config pull.rebase false  # merge (the default strategy)
hint:   git config pull.rebase true   # rebase
hint:   git config pull.ff only       # fast-forward only
hint:
hint: You can replace "git config" with "git config --global" to set a default
hint: preference for all repositories. You can also pass --rebase, --no-rebase,
hint: or --ff-only on the command line to override the configured default per
hint: invocation.


#You can store your credentials using the following command
$ git config credential.helper store
$ git push http://example.com/repo.git
Username: <type your username>
Password: <type your password>

#It should show a message as it works! To change port address, you need to edit the configuration file at /etc/apache2/ports.conf  and change the Listen 80 to your desired port number. 
#After edit, you need to restart the apache2 server.

#To restart apache2 web server -​​
sudo service apache2 restart


source /etc/apache2/envvars
/usr/sbin/apache2 -V
sudo /etc/init.d/apache2 {start|stop|restart}
sudo apache2ctl -S

#Python test
scrapy crawl ExtractScriptDetail -a linkArray='https://www.moneycontrol.com/india/stockpricequote/refineries/relianceindustries/RI'


/usr/local/CMAK/target/universal/cmak-3.0.0.5/bin/cmak -Dconfig.file=/usr/local/CMAK/conf/application.conf -Dhttp.port=9002

ps -aux | grep cma

systemctl status cmak.service

pip install --upgrade sentry-sdkimport sentry_sdk
sentry_sdk.init(
    "http://efd9befa648a45be92be7c315d22a429@192.168.1.2:9000/2",
    traces_sample_rate=1.0
)

#change password
sudo passwd postgres

#Running kafka consumer locally
kafka-console-producer.bat --broker-list 192.168.1.2:9092 --topic spider-command < c:\Temp\initiatMoneyControl.txt
C:\Temp\kafka\bin\windows

#Start cmak with different IP
sudo bin/cmak -Dconfig.file=/usr/local/CMAK/conf/application.conf -Dhttp.port=9002

#sample action
{"action":"shutdown"}
{"action":"run-spider", "spider-name":"ScriptDetail","payload":[]}
{"action":"run-spider", "spider-name":"InitialLinks","payload":{"targettype":"kafkatopic","targetvalue":"spider-command","strategy":"spiderpacket"}}
{"action":"run-spider", "spider-name":"InitialLinks","payload":{"targettype":"file","targetvalue":""}}

#sample sql cmd
sqlcmd -S localhost -U SA -P 'Meghana#29'
sqlcmd -S localhost -U SA -P 'Meghana#29' -Q "select Symbol, MoneycontrolLink as link from AnalysisDB.dbo.security where MoneycontrolLink is not null for JSON PATH"
